{% extends "base.html" %}
{% load staticfiles %}

{% block title %}
Predict - genTB
{% endblock %}


{% block content %}

        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Predict <small> upload your data and make predictions about resistances by drug.</small><h1>
            </div>
        </div>

        <div class = "row">
            <div class="col-md-6 portfolio-item">

                {% if not IS_LOGGED_IN %}
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h3 class="panel-title">Send Your FASTQ or VCF Data</h3>
                    </div>
                  <div class="panel-body">
                    <p>To contribute a file for prediction, please:
                        {% include "login_signup_links.html" %}
                    </p>
                  </div>
                </div>

                {% else %}
                    <h4><i>Upload VCF OR FASTQ Files:</i></h4>

                    {% if PREVIOUS_ATTEMPT_DELETED %}
                        <div class="alert alert-success" role="alert">
                            Note: Your previous dataset information, including the dropbox link, was removed.
                        </div>
                    {% endif %}

                    {% include "predict/predict_form.html" %}
               {% endif %}

            </div>

            <div class="col-md-6 portfolio-item">

<p>We recommend uploading two separate files for phenotype and genotype data through dataverse.</p>
<p>Genotype data formats accepted are FASTQ or VCF files. If you upload a VCF please describe in your dataverse upload how your VCF was generated, what software was used and which thresholds were applied and if the variants are filtered and how this was performed.</p>
<p>Phenotype data files:</p>
<ul>
    <li>We recommend formatting your file as a tab delimited or a comma delimited file. Excel files are also acceptable.</li>
    <li>Please include an ID field that links directly to the names of the FASTQ or VCF files that you upload.</li>
    <li>Drug resistance results should include information on what concentration of the drug was tested. For example if isoniazid drug resistance was tested at a concentration of 0.2 then the field containing the resistance status should be called inh_0.2 and so forth for other drugs. Please indicate the concentration units and method of testing in the description of your file during the dataverse upload.</li>
    <li>Please include data on when, month & year, and where the sample was collected including city & country. If GIS or longitude/latitude coordinates are available please include these as well. Please do not list postal or zip codes due to privacy concerns.</li>
    <li>Adding data on traditional fingerprint (RFLP, MIRU-VNTR, Spoligotype) is also helpful, and any completely de-identified data on the host is also acceptable.</li>
            </div>
        </div>


        <div class="col-md-6" id="d3-target-div" style="padding-left:60px;">
        </div>
        <script type="text/javascript" src="{{ STATIC_URL }}{% static 'd3/d3.v3.min.js' %}"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/app.js"></script>
{% endblock %}
